
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="https://learnopengl.com의 한국어 번역입니다.">
      
      
      
      
        <link rel="prev" href="../%EC%95%88%EB%85%95%20%EC%82%BC%EA%B0%81%ED%98%95/">
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>셰이더 - LearnOpenGL Korean</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/style.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="LearnOpenGL Korean" class="md-header__button md-logo" aria-label="LearnOpenGL Korean" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LearnOpenGL Korean
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              셰이더
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="LearnOpenGL Korean" class="md-nav__button md-logo" aria-label="LearnOpenGL Korean" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    LearnOpenGL Korean
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    소개
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    시작하기
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    시작하기
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../OpenGL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OpenGL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%EC%B5%9C%EC%B4%88%EC%9D%98%20%EC%B0%BD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    최초의 창
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%EC%B5%9C%EC%B4%88%EC%9D%98%20%EC%B0%BD-%EB%A6%AC%EB%88%85%EC%8A%A4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    리눅스에서의 최초의 창
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%EC%95%88%EB%85%95%20%EC%B0%BD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    안녕 창
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../%EC%95%88%EB%85%95%20%EC%82%BC%EA%B0%81%ED%98%95/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    안녕 삼각형
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    셰이더
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    셰이더
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#glsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        GLSL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GLSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        타입
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="타입">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        벡터
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        인앤아웃
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        유니폼
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#glsl" class="md-nav__link">
    <span class="md-ellipsis">
      
        GLSL
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GLSL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        타입
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="타입">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        벡터
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        인앤아웃
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      
        유니폼
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="_1">셰이더</h1>
<p><a href="../%EC%95%88%EB%85%95%20%EC%82%BC%EA%B0%81%ED%98%95/">안녕 삼각형</a> 챕터에서 언급했듯이, 셰이더는 GPU에서 실행되는 작은 프로그램입니다. 이러한 프로그램은 그래픽 파이프라인의 각 특정 단계에서 실행됩니다. 간단히 말해, 셰이더는 입력을 출력으로 변환하는 프로그램에 지나지 않습니다. 또한 셰이더는 서로 통신할 수 없도록 매우 독립적으로 작동하는 프로그램입니다. 셰이더 간의 통신은 오직 입력과 출력을 통해서만 이루어집니다.</p>
<p>이전 장에서는 셰이더의 기본적인 개념과 올바른 사용법을 간략하게 살펴보았습니다. 이제 셰이더, 특히 OpenGL 셰이딩 언어에 대해 보다 일반적인 방식으로 설명하겠습니다.</p>
<h2 id="glsl">GLSL</h2>
<p>셰이더는 C와 유사한 언어인 GLSL로 작성됩니다. GLSL은 그래픽 작업에 최적화되어 있으며, 벡터 및 행렬 조작에 특화된 유용한 기능들을 포함하고 있습니다.</p>
<p>셰이더는 항상 버전 선언으로 시작하고, 그 뒤에 입력 및 출력 변수 목록, 유니폼(uniforms) 변수, 그리고 메인 함수가 이어집니다. 각 셰이더의 진입점은 메인 함수이며, 여기서 입력 변수를 처리하고 결과를 출력 변수에 출력합니다. 유니폼 변수가 무엇인지 모르더라도 걱정하지 마세요. 곧 설명드리겠습니다.</p>
<p>셰이더는 일반적으로 다음과 같은 구조를 가지고 있습니다.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#version version_number</span>
<span class="k">in</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">in_variable_name</span><span class="p">;</span>
<span class="k">in</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">in_variable_name</span><span class="p">;</span>

<span class="k">out</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">out_variable_name</span><span class="p">;</span>

<span class="k">uniform</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="n">uniform_name</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">  </span><span class="c1">// 입력값을 처리하고 여러가지 그래픽 작업 수행</span>
<span class="w">  </span><span class="p">...</span>
<span class="w">  </span><span class="c1">// 처리된 결과를 출력 변수에 출력</span>
<span class="w">  </span><span class="n">out_variable_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">weird_stuff_we_processed</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>정점 셰이더에 대해 구체적으로 이야기할 때, 각 입력 변수는 <strong class="g">정점 속성(vertex attribute)</strong>이라고도 합니다. 선언할 수 있는 정점 속성의 최대 개수는 하드웨어에 의해 제한됩니다. OpenGL은 항상 최소 16개의 4성분 정점 속성을 사용할 수 있도록 보장하지만, 일부 하드웨어에서는 더 많은 속성을 허용할 수 있으며, 이는 <code>GL_MAX_VERTEX_ATTRIBS</code>를 쿼리하여 확인할 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><span class="kt">int</span><span class="w"> </span><span class="n">nrAttributes</span><span class="p">;</span>
<span class="n">glGetIntegerv</span><span class="p">(</span><span class="n">GL_MAX_VERTEX_ATTRIBS</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">nrAttributes</span><span class="p">);</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;Maximum nr of vertex attributes supported: &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">nrAttributes</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</code></pre></div>
<p>이 함수는 대개 최소값인 16을 반환하는데, 이는 대부분의 목적에 충분할 것입니다.</p>
<h3 id="_2">타입</h3>
<p>GLSL은 다른 프로그래밍 언어와 마찬가지로 변수의 종류를 지정하는 데이터 타입을 가지고 있습니다. GLSL에는 C 언어에서 흔히 볼 수 있는 int, float, double, uint, bool과 같은 기본 타입이 대부분 포함되어 있습니다. 또한, 벡터와 행렬이라는 두 가지 컨테이너 타입을 많이 사용하게 될 것입니다. 행렬에 대해서는 이후 장에서 자세히 다루겠습니다.</p>
<h4 id="_3">벡터</h4>
<p>GLSL에서 벡터는 방금 언급한 기본 유형들을 담을 수 있는 2, 3 또는 4개의 구성 요소로 이루어진 컨테이너입니다. 벡터는 다음과 같은 형태를 취할 수 있습니다(n은 구성 요소의 개수를 나타냅니다).</p>
<ul>
<li>vecn: n개의 부동소수점(float) 값로 이루어진 기본 벡터.</li>
<li>bvecn: n개의 불리언 값으로 이루어진 벡터.</li>
<li>ivecn: n개의 정수 값으로 이루어진 벡터.</li>
<li>uvecn: n개의 부호없는 정수(unsigned integer) 값으로 이루어진 벡터.</li>
<li>dvecn: n개의 더블(double) 값으로 이루어진 벡터.</li>
</ul>
<p>대부분의 경우 부동소수점 숫자가 우리의 목적에 충분하기 때문에 기본적인 vecn을 사용하게 될 것입니다.</p>
<p>벡터의 구성 요소는 <code>vec.x</code>와 같이 접근할 수 있으며, 여기서 <code>x</code>는 벡터의 첫 번째 구성 요소입니다. <code>.x</code>, <code>.y</code>, <code>.z</code>, <code>.w</code>를 사용하면 각각 첫 번째, 두 번째, 세 번째, 네 번째 구성 요소에 접근할 수 있습니다. GLSL에서는 색상에는 <code>rgba</code>를, 텍스처 좌표에는 <code>stpq</code>를 사용하여 동일한 구성 요소에 접근할 수도 있습니다.</p>
<p>벡터 데이터 타입은 <strong class="g">스위즐링(swizzling)</strong>이라는 흥미롭고 유연한 구성 요소 선택 기능을 제공합니다. 스위즐링을 사용하면 다음과 같은 구문을 사용할 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><span class="kt">vec2</span><span class="w"> </span><span class="n">someVec</span><span class="p">;</span>
<span class="kt">vec4</span><span class="w"> </span><span class="n">differentVec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">someVec</span><span class="p">.</span><span class="n">xyxx</span><span class="p">;</span>
<span class="kt">vec3</span><span class="w"> </span><span class="n">anotherVec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">differentVec</span><span class="p">.</span><span class="n">zyw</span><span class="p">;</span>
<span class="kt">vec4</span><span class="w"> </span><span class="n">otherVec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">someVec</span><span class="p">.</span><span class="n">xxxx</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">anotherVec</span><span class="p">.</span><span class="n">yxzy</span><span class="p">;</span>
</code></pre></div>
<p>원본 벡터에 해당 구성 요소가 있는 한, 최대 4개의 문자를 조합하여 새 벡터(동일한 타입)를 생성할 수 있습니다. 하지만 예시로 vec2의 .z 구성 요소에는 접근할 수 없습니다. 또한 벡터를 다른 벡터 생성자 호출의 인수로 전달하여 필요한 인수의 수를 줄일 수 있습니다.</p>
<div class="highlight"><pre><span></span><code><span class="kt">vec2</span><span class="w"> </span><span class="n">vect</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec2</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7</span><span class="p">);</span>
<span class="kt">vec4</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="n">vect</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span>
<span class="kt">vec4</span><span class="w"> </span><span class="n">otherResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">xyz</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
</code></pre></div>
<p>벡터는 모든 종류의 입력과 출력에 사용할 수 있는 유연한 데이터 유형입니다. 이 책 전체에서 벡터를 창의적으로 활용하는 다양한 예제를 보게 될 것입니다.</p>
<h3 id="_4">인앤아웃</h3>
<blockquote>
<p>햄버거가 아니라 인풋(input)과 아웃풋(output)입니다!</p>
</blockquote>
<p>셰이더는 그 자체로 훌륭한 프로그램이지만, 전체 시스템의 일부이기 때문에 각 셰이더에 입력과 출력을 지정하여 변수를 이동시킬 수 있도록 해야 합니다. GLSL은 이러한 목적을 위해 <code>in</code>과 <code>out</code> 키워드를 정의했습니다. 각 셰이더는 이 키워드를 사용하여 입력과 출력을 지정할 수 있으며, 출력 변수가 다음 셰이더 단계의 입력 변수의 타입과 일치하면 해당 변수가 전달됩니다. 다만, 정점 셰이더와 프래그먼트 셰이더는 약간 다릅니다.</p>
<p>정점 셰이더는 어떤 형태로든 입력을 받아야 제대로 작동합니다. 정점 셰이더는 입력을 정점 데이터에서 직접 받는다는 점에서 다른 셰이더와 차별화됩니다. 정점 데이터의 구조를 정의하기 위해 입력 변수에 위치 메타데이터를 지정하여 CPU에서 정점 속성을 설정할 수 있도록 합니다. 이전 장에서 <code>layout (location = 0)</code>으로 이를 살펴보았습니다. 따라서 정점 셰이더는 입력에 대한 추가적인 레이아웃 지정이 필요하며, 이를 통해 정점 데이터와 연결할 수 있습니다.</p>
<div class="admonition tip">
<p><code>layout (location = 0)</code>를 생략하고 OpenGL 코드에서 <code>glGetAttribLocation</code>을 통해 속성 위치를 조회하는 것도 가능하지만, 저는 정점 셰이더에서 설정하는 것을 선호합니다. 이해하기 쉽고 (여러분과 OpenGL 모두) 작업량을 줄여줍니다.</p>
</div>
<p>또 다른 예외 사항은 프래그먼트 셰이더가 최종 출력 색상을 생성해야 하므로 vec4 색상 출력 변수가 필요하다는 것입니다. 프래그먼트 셰이더에서 출력 색상을 지정하지 않으면 해당 프래그먼트의 색상 버퍼 출력이 정의되지 않은 상태가 됩니다(일반적으로 그런 상황에서 OpenGL은 해당 프래그먼트를 검정색 또는 흰색으로 렌더링합니다).</p>
<p>따라서 한 셰이더에서 다른 셰이더로 데이터를 보내려면 보내는 셰이더에 출력 변수를 선언하고 받는 셰이더에도 동일한 입력 변수를 선언해야 합니다. 양쪽에서 변수의 타입과 이름이 같으면 OpenGL은 해당 변수들을 연결하고, 그 후 셰이더 간에 데이터를 주고받을 수 있게 됩니다(프로그램 객체를 연결할 때 이 과정이 수행됩니다). 실제로 어떻게 작동하는지 보여주기 위해 이전 장에서 다룬 셰이더들을 수정하여 정점 셰이더가 프래그먼트 셰이더의 색상을 결정하도록 하겠습니다.</p>
<p><strong>정점 셰이더</strong></p>
<div class="highlight"><pre><span></span><code><span class="cp">#version 330 core</span>
<span class="k">layout</span><span class="w"> </span><span class="p">(</span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mo">0</span><span class="p">)</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="kt">vec3</span><span class="w"> </span><span class="n">aPos</span><span class="p">;</span><span class="w"> </span><span class="c1">// the position variable has attribute position 0</span>

<span class="k">out</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">vertexColor</span><span class="p">;</span><span class="w"> </span><span class="c1">// specify a color output to the fragment shader</span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="nb">gl_Position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="n">aPos</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// see how we directly give a vec3 to vec4&#39;s constructor</span>
<span class="w">    </span><span class="n">vertexColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">vec4</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span><span class="w"> </span><span class="c1">// set the output variable to a dark-red color</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>프래그먼트 셰이더</strong></p>
<div class="highlight"><pre><span></span><code><span class="cp">#version 330 core</span>
<span class="k">out</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">FragColor</span><span class="p">;</span>

<span class="k">in</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">vertexColor</span><span class="p">;</span><span class="w"> </span><span class="c1">// the input variable from the vertex shader (same name and same type)  </span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">FragColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vertexColor</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>보시다시피, 정점 셰이더에서 설정하는 vec4 출력 변수인 <code>vertexColor</code>를 선언했고, 프래그먼트 셰이더에서도 유사하게 <code>vertexColor</code> 입력 변수를 선언했습니다. 두 변수의 타입과 이름이 같기 때문에 프래그먼트 셰이더의 <code>vertexColor</code>는 정점 셰이더의 <code>vertexColor</code>와 연결됩니다. 정점 셰이더에서 색상을 진한 빨간색으로 설정했으므로, 결과 프래그먼트도 진한 빨간색이 되어야 합니다. 다음 이미지는 그 결과를 보여줍니다.</p>
<p><img alt="" src="../../static/shaders.png" /></p>
<p>자, 이제 됐어요! 정점 셰이더에서 프래그먼트 셰이더로 값을 전달하는 데 성공했습니다. 이제 좀 더 특별하게 애플리케이션에서 프래그먼트 셰이더로 색상을 전달할 수 있는지 확인해 볼까요!</p>
<h3 id="_5">유니폼</h3>
<p><strong class="g">유니폼(Uniforms)</strong>은 CPU에서 실행되는 애플리케이션의 데이터를 GPU의 셰이더로 전달하는 또 다른 방법입니다. 하지만 유니폼은 정점 속성과는 약간의 차이가 있습니다. 첫째, 유니폼은 전역 변수입니다. 전역 변수란 셰이더 프로그램 객체별로 고유한 값을 가지며, 프로그램의 어느 단계에서든 모든 셰이더에서 접근할 수 있음을 의미합니다. 둘째, 유니폼 값을 어떤 값으로 설정하든, 해당 값은 재설정되거나 업데이트될 때까지 유지됩니다.</p>
<p>GLSL에서 유니폼 변수를 선언하려면 셰이더에 <code>uniform</code> 키워드와 타입, 이름을 추가하기만 하면 됩니다. 이렇게 하면 셰이더에서 새로 선언된 유니폼 변수를 사용할 수 있습니다. 이번에는 유니폼 변수를 통해 삼각형의 색상을 설정할 수 있는지 살펴보겠습니다.</p>
<div class="highlight"><pre><span></span><code><span class="cp">#version 330 core</span>
<span class="k">out</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">FragColor</span><span class="p">;</span>

<span class="k">uniform</span><span class="w"> </span><span class="kt">vec4</span><span class="w"> </span><span class="n">ourColor</span><span class="p">;</span><span class="w"> </span><span class="c1">// 이 변수는 나중에 OpenGL쪽 코드에서 값을 설정하겠습니다.</span>

<span class="kt">void</span><span class="w"> </span><span class="n">main</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">FragColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ourColor</span><span class="p">;</span>
<span class="p">}</span><span class="w">   </span>
</code></pre></div>
<p>프래그먼트 셰이더에서 <code>vec4 ourColor</code>라는 유니폼 변수를 선언하고, 프래그먼트의 출력 색상을 이 유니폼 변수의 값으로 설정했습니다. 유니폼 변수는 전역 변수이므로 원하는 셰이더 단계에서 정의할 수 있으며, 따라서 프래그먼트 셰이더로 값을 전달하기 위해 정점 셰이더를 다시 거칠 필요가 없습니다. 정점 셰이더에서는 이 유니폼 변수를 사용하지 않으므로, 정점 셰이더에서 정의할 필요가 없습니다.</p>
<div class="admonition warning">
<p>GLSL 코드에서 전혀 사용되지 않는 유니폼 변수를 선언하면 컴파일러가 컴파일된 버전에서 해당 변수를 조용히 제거하는데, 이로 인해 여러 가지 골치 아픈 오류가 발생합니다. 이 점을 꼭 기억하세요!</p>
</div>
<p>현재 유니폼은 비어 있습니다. 아직 유니폼에 아무 데이터도 추가하지 않았으니, 이제 추가해 보겠습니다. 먼저 셰이더에서 유니폼 속성의 인덱스/위치를 찾아야 합니다. 유니폼의 인덱스/위치를 찾았으면 값을 업데이트할 수 있습니다. 프래그먼트 셰이더에 단일 색상을 전달하는 대신, 시간이 지남에 따라 색상이 점진적으로 변하도록 만들어 보겠습니다.</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">timeValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">glfwGetTime</span><span class="p">();</span>
<span class="kt">float</span><span class="w"> </span><span class="n">greenValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">timeValue</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.0f</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">0.5f</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">vertexColorLocation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">glGetUniformLocation</span><span class="p">(</span><span class="n">shaderProgram</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ourColor&quot;</span><span class="p">);</span>
<span class="n">glUseProgram</span><span class="p">(</span><span class="n">shaderProgram</span><span class="p">);</span>
<span class="n">glUniform4f</span><span class="p">(</span><span class="n">vertexColorLocation</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="n">greenValue</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0f</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0f</span><span class="p">);</span>
</code></pre></div>
<p>먼저 <code>glfwGetTime()</code> 함수를 사용하여 실행 시간을 초 단위로 가져옵니다. 그런 다음 <code>sin</code> 함수를 사용하여 색상을 0.0~1.0 범위로 변화시키고 그 결과를 <code>greenValue</code>에 저장합니다.</p>
<p>다음으로 <code>glGetUniformLocation</code> 함수를 사용하여 <code>ourColor</code> 유니폼의 위치를 ​​조회합니다. 조회 함수에는 셰이더 프로그램과 위치를 가져올 유니폼의 이름을 전달합니다. <code>glGetUniformLocation</code> 함수가 -1을 반환하면 위치를 찾을 수 없다는 의미입니다. 마지막으로 <code>glUniform4f</code> 함수를 사용하여 유니폼 값을 설정할 수 있습니다. 유니폼 위치를 찾는 데에는 셰이더 프로그램을 먼저 사용할 필요가 없지만, 유니폼 값을 업데이트하려면 먼저 해당 프로그램을 사용해야 합니다(<code>glUseProgram</code> 호출). 이는 현재 활성화된 셰이더 프로그램에 유니폼 값을 설정하기 때문입니다.</p>
<div class="admonition tip">
<p>OpenGL은 본질적으로 C 라이브러리이기 때문에 함수 오버로딩을 기본적으로 지원하지 않습니다. 따라서 함수를 여러 유형으로 호출할 수 있는 경우, OpenGL은 필요한 각 유형에 대해 새로운 함수를 정의합니다. <code>glUniform</code> 함수가 바로 그 대표적인 예입니다. 이 함수는 설정하려는 유니폼 유형에 맞는 특정 접미사를 필요로 합니다. 가능한 접미사 몇 가지는 다음과 같습니다.</p>
<ul>
<li>f: 이 함수는 값으로 부동 소수점을 기대합니다.</li>
<li>i: 이 함수는 값으로 정수를 기대합니다.</li>
<li>ui: 이 함수는 값으로 부호 없는 정수를 기대합니다.</li>
<li>3f: 이 함수는 값으로 3개의 부동 소수점 숫자를 기대합니다.</li>
<li>fv: 이 함수는 값으로 float형 벡터/배열을 기대합니다.</li>
</ul>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>